import{_ as b,f as k,c as h,a as t,b as u,w as a,F as C,g as w,h as y,i as r,v as p,j as x,k as m,r as V,o as l,d,n as U,l as c,m as _,p as $,e as j}from"./index-n-sL_Qjp.js";const A={name:"AdminView",components:{ButtonMain:k},props:{articles:Array},data(){return{form_show:!1,title:"",description:"",price:"",image:"",link:"",categorie:""}},methods:{createArticle(){fetch("https://birth-backend.onrender.com/api/article",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.title,description:this.description,prix:this.price,photo:this.image,lien:this.link,categorie:this.categorie,visible:!0})}).then(o=>o.json()).then(o=>{alert("L'article a été ajouté avec succès"),this.reset(),this.form_show=!1,this.$emit("newArticle",{name:this.title,description:this.description,prix:this.price,image:this.image,lien:this.link,categorie:this.categorie,visible:!0})}).catch(o=>{alert("Un probleme a survenu lors de l'ajout de l'article")})},reset(){this.title="",this.description="",this.price="",this.image="",this.link="",this.categorie=""},change(o){console.log(o),fetch("https://birth-backend.onrender.com/api/article/switch/"+o,{method:"PUT",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{alert("La visibilité de l'article a été modifiée avec succès")}).catch(i=>{alert("Un probleme a survenu lors de la modification de la visibilité de l'article")})}},computed:{visibles(){return this.articles.filter(o=>o.visible===!0)}}},s=o=>($("data-v-e3f2489d"),o=o(),j(),o),S={class:"about"},T={class:"tete"},N=s(()=>t("h1",null,"This is the admin page",-1)),B={class:"wrapper2"},I={key:0},D={class:"lien-container"},L={class:"lien"},M=s(()=>t("h2",null,"Catégorie: ",-1)),z=["src"],F=s(()=>t("label",{for:"title"},"Title",-1)),P=s(()=>t("label",{for:"categorie"},"Catégorie",-1)),O=s(()=>t("option",{value:"meuble"},"meuble",-1)),R=s(()=>t("option",{value:"deco"},"deco",-1)),E=s(()=>t("option",{value:"vetement"},"vetement",-1)),J=[O,R,E],q=s(()=>t("label",{for:"price"},"Price",-1)),G=s(()=>t("label",{for:"description"},"Description",-1)),H=s(()=>t("label",{for:"image"},"Image",-1)),K=s(()=>t("label",{for:"cagnotte"},"Lien vers la cagnotte",-1)),Q={class:"wrapper"};function W(o,i,v,X,Y,g){const n=V("button-main");return l(),h("div",S,[t("div",T,[N,u(n,{onClick:i[0]||(i[0]=e=>this.form_show=!0)},{default:a(()=>[d("Ajoute un article")]),_:1})]),t("ul",null,[(l(!0),h(C,null,w(v.articles,e=>(l(),h("li",{key:e.id,class:U([e.visible?"visible":"hidden",e.achete?"achete":"libre"])},[t("div",B,[e.achete?(l(),h("h1",I,"Article acheté par "+c(e.prenom),1)):m("",!0),t("h2",null,c(e.name),1),t("p",null,c(e.description),1),t("p",null,c(e.prix)+" €",1),t("div",D,[t("p",L,c(e.lien),1)]),M,t("p",null,c(e.categorie),1),e.visible?(l(),_(n,{key:2,onClick:f=>{e.visible=!1,this.change(e._id)}},{default:a(()=>[d("Cacher")]),_:2},1032,["onClick"])):(l(),_(n,{key:1,onClick:f=>{this.change(e._id),e.visible=!0}},{default:a(()=>[d("Rendre visible")]),_:2},1032,["onClick"]))]),t("img",{src:e.photo,alt:"article.title"},null,8,z)],2))),128))]),this.form_show?(l(),h("form",{key:0,action:"",onSubmit:i[9]||(i[9]=y(e=>this.createArticle(),["prevent"]))},[t("fieldset",null,[t("div",null,[F,r(t("input",{placeholder:"Nom de l'article",type:"text",id:"title","onUpdate:modelValue":i[1]||(i[1]=e=>this.title=e)},null,512),[[p,this.title]])]),t("div",null,[P,r(t("select",{name:"categorie",id:"categorie","onUpdate:modelValue":i[2]||(i[2]=e=>this.categorie=e)},J,512),[[x,this.categorie]])]),t("div",null,[q,r(t("input",{type:"number",id:"price","onUpdate:modelValue":i[3]||(i[3]=e=>this.price=e)},null,512),[[p,this.price]])])]),G,r(t("textarea",{name:"description",id:"description",cols:"30",rows:"3","onUpdate:modelValue":i[4]||(i[4]=e=>this.description=e),placeholder:"Description de l'article"},null,512),[[p,this.description]]),H,r(t("input",{type:"text",id:"image","onUpdate:modelValue":i[5]||(i[5]=e=>this.image=e),placeholder:"Collez le lien de la photo"},null,512),[[p,this.image]]),K,r(t("input",{type:"text",id:"cagnotte","onUpdate:modelValue":i[6]||(i[6]=e=>this.link=e),placeholder:"Collez le lien de la cagnotte"},null,512),[[p,this.link]]),t("div",Q,[u(n,{style:{"background-color":"red"},onClick:i[7]||(i[7]=e=>g.reset())},{default:a(()=>[d("Reset")]),_:1}),u(n,{style:{"background-color":"lightgreen"}},{default:a(()=>[d("Valider")]),_:1}),u(n,{onClick:i[8]||(i[8]=e=>this.form_show=!1)},{default:a(()=>[d("Fermer")]),_:1})])],32)):m("",!0)])}const ee=b(A,[["render",W],["__scopeId","data-v-e3f2489d"]]);export{ee as default};

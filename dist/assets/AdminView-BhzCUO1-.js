import{_ as g,f as k,c as p,a as t,b as u,w as n,F as C,g as w,h as y,i as r,v as h,j as V,k as m,r as x,o as l,d,n as j,l as c,m as f,p as S,e as U,q as $}from"./index-D1DOI_XB.js";const A={name:"AdminView",components:{ButtonMain:k},props:{articles:Array},data(){return{form_show:!1,title:"",description:"",price:"",image:"",link:"",categorie:""}},methods:{createArticle(){fetch("https://birth-backend.onrender.com/api/article",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:this.title,description:this.description,prix:this.price,photo:this.image,lien:this.link,categorie:this.categorie,visible:!0})}).then(o=>o.json()).then(o=>{alert("L'article a été ajouté avec succès"),this.reset(),this.form_show=!1,this.$emit("newArticle",{name:this.title,description:this.description,prix:this.price,image:this.image,lien:this.link,categorie:this.categorie,visible:!0})}).catch(o=>{alert("Un probleme a survenu lors de l'ajout de l'article")})},reset(){this.title="",this.description="",this.price="",this.image="",this.link="",this.categorie=""},change(o){console.log(o),fetch("https://birth-backend.onrender.com/api/article/switch/"+o,{method:"PUT",headers:{"Content-Type":"application/json"}}).then(i=>i.json()).then(i=>{alert("La visibilité de l'article a été modifiée avec succès")}).catch(i=>{alert("Un probleme a survenu lors de la modification de la visibilité de l'article")})}},computed:{visibles(){return this.articles.filter(o=>o.visible===!0)}}},s=o=>(S("data-v-b4cf08fa"),o=o(),U(),o),T={class:"about"},N={class:"tete"},B=s(()=>t("h1",null,"This is the admin page",-1)),I={class:"wrapper2"},D={key:0},L={class:"lien-container"},M={class:"lien"},z=s(()=>t("h2",null,"Catégorie: ",-1)),F=["src"],P=s(()=>t("label",{for:"title"},"Title",-1)),O=s(()=>t("label",{for:"categorie"},"Catégorie",-1)),R=$('<option value="meuble" data-v-b4cf08fa>vêtements</option><option value="deco" data-v-b4cf08fa>décorations</option><option value="vetement" data-v-b4cf08fa>meubles</option><option value="jouet" data-v-b4cf08fa>jouets</option><option value="se déplacer" data-v-b4cf08fa>se déplacer</option><option value="autre" data-v-b4cf08fa>autres</option>',6),q=[R],E=s(()=>t("label",{for:"price"},"Price",-1)),J=s(()=>t("label",{for:"description"},"Description",-1)),G=s(()=>t("label",{for:"image"},"Image",-1)),H=s(()=>t("label",{for:"cagnotte"},"Lien vers la cagnotte",-1)),K={class:"wrapper"};function Q(o,i,v,W,X,b){const a=x("button-main");return l(),p("div",T,[t("div",N,[B,u(a,{onClick:i[0]||(i[0]=e=>this.form_show=!0)},{default:n(()=>[d("Ajoute un article")]),_:1})]),t("ul",null,[(l(!0),p(C,null,w(v.articles,e=>(l(),p("li",{key:e.id,class:j([e.visible?"visible":"hidden",e.achete?"achete":"libre"])},[t("div",I,[e.achete?(l(),p("h1",D,"Article acheté par "+c(e.prenom),1)):m("",!0),t("h2",null,c(e.name),1),t("p",null,c(e.description),1),t("p",null,c(e.prix)+" €",1),t("div",L,[t("p",M,c(e.lien),1)]),z,t("p",null,c(e.categorie),1),e.visible?(l(),f(a,{key:2,onClick:_=>{e.visible=!1,this.change(e._id)}},{default:n(()=>[d("Cacher")]),_:2},1032,["onClick"])):(l(),f(a,{key:1,onClick:_=>{this.change(e._id),e.visible=!0}},{default:n(()=>[d("Rendre visible")]),_:2},1032,["onClick"]))]),t("img",{src:e.photo,alt:"article.title"},null,8,F)],2))),128))]),this.form_show?(l(),p("form",{key:0,action:"",onSubmit:i[9]||(i[9]=y(e=>this.createArticle(),["prevent"]))},[t("fieldset",null,[t("div",null,[P,r(t("input",{placeholder:"Nom de l'article",type:"text",id:"title","onUpdate:modelValue":i[1]||(i[1]=e=>this.title=e)},null,512),[[h,this.title]])]),t("div",null,[O,r(t("select",{name:"categorie",id:"categorie","onUpdate:modelValue":i[2]||(i[2]=e=>this.categorie=e)},q,512),[[V,this.categorie]])]),t("div",null,[E,r(t("input",{type:"number",id:"price","onUpdate:modelValue":i[3]||(i[3]=e=>this.price=e)},null,512),[[h,this.price]])])]),J,r(t("textarea",{name:"description",id:"description",cols:"30",rows:"3","onUpdate:modelValue":i[4]||(i[4]=e=>this.description=e),placeholder:"Description de l'article"},null,512),[[h,this.description]]),G,r(t("input",{type:"text",id:"image","onUpdate:modelValue":i[5]||(i[5]=e=>this.image=e),placeholder:"Collez le lien de la photo"},null,512),[[h,this.image]]),H,r(t("input",{type:"text",id:"cagnotte","onUpdate:modelValue":i[6]||(i[6]=e=>this.link=e),placeholder:"Collez le lien de la cagnotte"},null,512),[[h,this.link]]),t("div",K,[u(a,{style:{"background-color":"red"},onClick:i[7]||(i[7]=e=>b.reset())},{default:n(()=>[d("Reset")]),_:1}),u(a,{style:{"background-color":"lightgreen"}},{default:n(()=>[d("Valider")]),_:1}),u(a,{onClick:i[8]||(i[8]=e=>this.form_show=!1)},{default:n(()=>[d("Fermer")]),_:1})])],32)):m("",!0)])}const Z=g(A,[["render",Q],["__scopeId","data-v-b4cf08fa"]]);export{Z as default};
